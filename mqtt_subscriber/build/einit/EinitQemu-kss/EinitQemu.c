/* The following code has been generated by `einit` program */

#include <stdlib.h>
#include <stdio.h>

#include <rtl/retcode.h>
#include <coresrv/entity/entity_api.h>
#include <services/handle/if_connection.h>



static const EntityInfo taskInfo_kl_Ntpd_0 = {
    .eiid = "kl.Ntpd",
    .max_endpoints = 0,
    .endpoints = NK_NULL,
};
static const EndpointInfo endpointsInfo_kl_VfsNet_1[12] = {
    {
        .name = "kl.Vfs.server",
        .riid = 0,
        .iface_name = "kl.VfsFilesystem",
    },
    {
        .name = "vfs.server",
        .riid = 0,
        .iface_name = "kl.VfsFilesystem",
    },
    {
        .name = "kl.Vfs.netcfg",
        .riid = 1,
        .iface_name = "kl.VfsNetConfig",
    },
    {
        .name = "vfs.netcfg",
        .riid = 1,
        .iface_name = "kl.VfsNetConfig",
    },
    {
        .name = "kl.Vfs.bpfcfg",
        .riid = 2,
        .iface_name = "kl.VfsBPFilter",
    },
    {
        .name = "vfs.bpfcfg",
        .riid = 2,
        .iface_name = "kl.VfsBPFilter",
    },
    {
        .name = "kl.Vfs.npfcfg",
        .riid = 3,
        .iface_name = "kl.VfsNPFilter",
    },
    {
        .name = "vfs.npfcfg",
        .riid = 3,
        .iface_name = "kl.VfsNPFilter",
    },
    {
        .name = "kl.Vfs.xattrcfg",
        .riid = 4,
        .iface_name = "kl.VfsExtAttr",
    },
    {
        .name = "vfs.xattrcfg",
        .riid = 4,
        .iface_name = "kl.VfsExtAttr",
    },
    {
        .name = "kl.Vfs.aclcfg",
        .riid = 5,
        .iface_name = "kl.VfsACL",
    },
    {
        .name = "vfs.aclcfg",
        .riid = 5,
        .iface_name = "kl.VfsACL",
    }
};
static const EntityInfo taskInfo_kl_VfsNet_1 = {
    .eiid = "kl.VfsNet",
    .max_endpoints = 12,
    .endpoints = endpointsInfo_kl_VfsNet_1,
};
static const EndpointInfo endpointsInfo_kl_VfsRamFs_2[12] = {
    {
        .name = "kl.Vfs.server",
        .riid = 0,
        .iface_name = "kl.VfsFilesystem",
    },
    {
        .name = "vfs.server",
        .riid = 0,
        .iface_name = "kl.VfsFilesystem",
    },
    {
        .name = "kl.Vfs.netcfg",
        .riid = 1,
        .iface_name = "kl.VfsNetConfig",
    },
    {
        .name = "vfs.netcfg",
        .riid = 1,
        .iface_name = "kl.VfsNetConfig",
    },
    {
        .name = "kl.Vfs.bpfcfg",
        .riid = 2,
        .iface_name = "kl.VfsBPFilter",
    },
    {
        .name = "vfs.bpfcfg",
        .riid = 2,
        .iface_name = "kl.VfsBPFilter",
    },
    {
        .name = "kl.Vfs.npfcfg",
        .riid = 3,
        .iface_name = "kl.VfsNPFilter",
    },
    {
        .name = "vfs.npfcfg",
        .riid = 3,
        .iface_name = "kl.VfsNPFilter",
    },
    {
        .name = "kl.Vfs.xattrcfg",
        .riid = 4,
        .iface_name = "kl.VfsExtAttr",
    },
    {
        .name = "vfs.xattrcfg",
        .riid = 4,
        .iface_name = "kl.VfsExtAttr",
    },
    {
        .name = "kl.Vfs.aclcfg",
        .riid = 5,
        .iface_name = "kl.VfsACL",
    },
    {
        .name = "vfs.aclcfg",
        .riid = 5,
        .iface_name = "kl.VfsACL",
    }
};
static const EntityInfo taskInfo_kl_VfsRamFs_2 = {
    .eiid = "kl.VfsRamFs",
    .max_endpoints = 12,
    .endpoints = endpointsInfo_kl_VfsRamFs_2,
};
static const EndpointInfo endpointsInfo_kl_drivers_BSP_3[2] = {
    {
        .name = "kl.drivers.BSP.bsp",
        .riid = 0,
        .iface_name = "kl.drivers.BSP",
    },
    {
        .name = "bsp",
        .riid = 0,
        .iface_name = "kl.drivers.BSP",
    }
};
static const EntityInfo taskInfo_kl_drivers_BSP_3 = {
    .eiid = "kl.drivers.BSP",
    .max_endpoints = 2,
    .endpoints = endpointsInfo_kl_drivers_BSP_3,
};
static const EndpointInfo endpointsInfo_kl_drivers_GPIO_4[4] = {
    {
        .name = "kl.drivers.GPIO.driver",
        .riid = 0,
        .iface_name = "kl.drivers.Driver",
    },
    {
        .name = "driver",
        .riid = 0,
        .iface_name = "kl.drivers.Driver",
    },
    {
        .name = "kl.drivers.GPIO.gpio",
        .riid = 1,
        .iface_name = "kl.drivers.GPIO",
    },
    {
        .name = "gpio",
        .riid = 1,
        .iface_name = "kl.drivers.GPIO",
    }
};
static const EntityInfo taskInfo_kl_drivers_GPIO_4 = {
    .eiid = "kl.drivers.GPIO",
    .max_endpoints = 4,
    .endpoints = endpointsInfo_kl_drivers_GPIO_4,
};
static const EndpointInfo endpointsInfo_kl_drivers_RAMDisk_5[2] = {
    {
        .name = "kl.drivers.RAMDisk.ramdisk",
        .riid = 0,
        .iface_name = "kl.drivers.Block",
    },
    {
        .name = "ramdisk",
        .riid = 0,
        .iface_name = "kl.drivers.Block",
    }
};
static const EntityInfo taskInfo_kl_drivers_RAMDisk_5 = {
    .eiid = "kl.drivers.RAMDisk",
    .max_endpoints = 2,
    .endpoints = endpointsInfo_kl_drivers_RAMDisk_5,
};
static const EndpointInfo endpointsInfo_kl_rump_Dhcpcd_6[2] = {
    {
        .name = "kl.rump.Dhcpcd.dhcpcd",
        .riid = 0,
        .iface_name = "kl.rump.DhcpcdConfig",
    },
    {
        .name = "dhcpcd",
        .riid = 0,
        .iface_name = "kl.rump.DhcpcdConfig",
    }
};
static const EntityInfo taskInfo_kl_rump_Dhcpcd_6 = {
    .eiid = "kl.rump.Dhcpcd",
    .max_endpoints = 2,
    .endpoints = endpointsInfo_kl_rump_Dhcpcd_6,
};
static const EndpointInfo endpointsInfo_mosquitto_Showapp_7[2] = {
    {
        .name = "mosquitto.Printnum.printnum",
        .riid = 0,
        .iface_name = "mosquitto.Printnum",
    },
    {
        .name = "Showapp.printnum",
        .riid = 0,
        .iface_name = "mosquitto.Printnum",
    }
};
static const EntityInfo taskInfo_mosquitto_Showapp_7 = {
    .eiid = "mosquitto.Showapp",
    .max_endpoints = 2,
    .endpoints = endpointsInfo_mosquitto_Showapp_7,
};
static const EntityInfo taskInfo_mosquitto_Subscriber_8 = {
    .eiid = "mosquitto.Subscriber",
    .max_endpoints = 0,
    .endpoints = NK_NULL,
};

/* init entity entry point */
int main(void) {

    Entity * task_kl_Ntpd_0;
    Entity * task_kl_VfsNet_1;
    Entity * task_kl_VfsRamFs_2;
    Entity * task_kl_drivers_BSP_3;
    Entity * task_kl_drivers_GPIO_4;
    Entity * task_kl_drivers_RAMDisk_5;
    Entity * task_kl_rump_Dhcpcd_6;
    Entity * task_mosquitto_Showapp_7;
    Entity * task_mosquitto_Subscriber_8;
    const char * taskInfo_kl_Ntpd_0_env[] = {
        "VFS_FILESYSTEM_BACKEND=client:kl.VfsRamFs",
        "VFS_NETWORK_BACKEND=client:kl.VfsNet",
        RTL_NULL
    };
    const char * taskInfo_kl_VfsNet_1_env[] = {
        "DEFAULT_DNS_SERVER=8.8.8.8",
        "VFS_FILESYSTEM_BACKEND=server:kl.VfsNet",
        "VFS_NETWORK_BACKEND=server:kl.VfsNet",
        RTL_NULL
    };
    const char * taskInfo_kl_VfsRamFs_2_env[] = {
        "ROOTFS=ramdisk0,0 / ext4 0",
        "VFS_FILESYSTEM_BACKEND=server:kl.VfsRamFs",
        RTL_NULL
    };



    const char * taskInfo_kl_rump_Dhcpcd_6_env[] = {
        "VFS_FILESYSTEM_BACKEND=client{fs->net}:kl.VfsRamFs",
        "VFS_NETWORK_BACKEND=client:kl.VfsNet",
        RTL_NULL
    };

    const char * taskInfo_mosquitto_Subscriber_8_env[] = {
        "MQTT_BROKER_ADDRESS=10.0.2.2",
        "MQTT_BROKER_PORT=1883",
        "VFS_FILESYSTEM_BACKEND=client:kl.VfsRamFs",
        "VFS_NETWORK_BACKEND=client:kl.VfsNet",
        RTL_NULL
    };
    const char * taskInfo_kl_Ntpd_0_args[] = {
        "ntpd",
        "-4",
        "-c",
        "/etc/ntp.conf",
        RTL_NULL
    };
    const char * taskInfo_kl_VfsNet_1_args[] = {
        "VfsNet",
        "-l",
        "devfs /dev devfs 0",
        RTL_NULL
    };
    const char * taskInfo_kl_VfsRamFs_2_args[] = {
        "VfsRamFs",
        "-l",
        "devfs /dev devfs 0",
        RTL_NULL
    };
    const char * taskInfo_kl_drivers_BSP_3_args[] = {
        "bsp_qemu",
        RTL_NULL
    };
    const char * taskInfo_kl_drivers_GPIO_4_args[] = {
        "gpio_qemu",
        RTL_NULL
    };
    const char * taskInfo_kl_drivers_RAMDisk_5_args[] = {
        "ramdisk",
        RTL_NULL
    };
    const char * taskInfo_kl_rump_Dhcpcd_6_args[] = {
        "dhcpcd_entity",
        "-4",
        "-f",
        "/etc/dhcpcd.conf",
        RTL_NULL
    };
    const char * taskInfo_mosquitto_Showapp_7_args[] = {
        "Showapp",
        RTL_NULL
    };
    const char * taskInfo_mosquitto_Subscriber_8_args[] = {
        "Subscriber",
        RTL_NULL
    };

    /* initialize entities */

    task_mosquitto_Showapp_7 = EntityInitEx(
        &taskInfo_mosquitto_Showapp_7, "mosquitto.Showapp", "Showapp"
    );
    if (!task_mosquitto_Showapp_7) {
        fprintf(
            stderr, "Can't initialize task \"mosquitto.Showapp\"\n"
        );
        return EXIT_FAILURE;
    }

    if (EntitySetArgs(task_mosquitto_Showapp_7, taskInfo_mosquitto_Showapp_7_args) != rcOk) {
        fprintf(
            stderr, "Can't set args for task \"mosquitto.Showapp\"\n"
        );
        return EXIT_FAILURE;
    }
    task_kl_drivers_RAMDisk_5 = EntityInitEx(
        &taskInfo_kl_drivers_RAMDisk_5, "kl.drivers.RAMDisk", "ramdisk"
    );
    if (!task_kl_drivers_RAMDisk_5) {
        fprintf(
            stderr, "Can't initialize task \"kl.drivers.RAMDisk\"\n"
        );
        return EXIT_FAILURE;
    }

    if (EntitySetArgs(task_kl_drivers_RAMDisk_5, taskInfo_kl_drivers_RAMDisk_5_args) != rcOk) {
        fprintf(
            stderr, "Can't set args for task \"kl.drivers.RAMDisk\"\n"
        );
        return EXIT_FAILURE;
    }
    task_kl_drivers_GPIO_4 = EntityInitEx(
        &taskInfo_kl_drivers_GPIO_4, "kl.drivers.GPIO", "gpio_qemu"
    );
    if (!task_kl_drivers_GPIO_4) {
        fprintf(
            stderr, "Can't initialize task \"kl.drivers.GPIO\"\n"
        );
        return EXIT_FAILURE;
    }

    if (EntitySetArgs(task_kl_drivers_GPIO_4, taskInfo_kl_drivers_GPIO_4_args) != rcOk) {
        fprintf(
            stderr, "Can't set args for task \"kl.drivers.GPIO\"\n"
        );
        return EXIT_FAILURE;
    }
    task_kl_drivers_BSP_3 = EntityInitEx(
        &taskInfo_kl_drivers_BSP_3, "kl.drivers.BSP", "bsp_qemu"
    );
    if (!task_kl_drivers_BSP_3) {
        fprintf(
            stderr, "Can't initialize task \"kl.drivers.BSP\"\n"
        );
        return EXIT_FAILURE;
    }

    if (EntitySetArgs(task_kl_drivers_BSP_3, taskInfo_kl_drivers_BSP_3_args) != rcOk) {
        fprintf(
            stderr, "Can't set args for task \"kl.drivers.BSP\"\n"
        );
        return EXIT_FAILURE;
    }
    task_kl_VfsRamFs_2 = EntityInitEx(
        &taskInfo_kl_VfsRamFs_2, "kl.VfsRamFs", "VfsRamFs"
    );
    if (!task_kl_VfsRamFs_2) {
        fprintf(
            stderr, "Can't initialize task \"kl.VfsRamFs\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntitySetEnv(task_kl_VfsRamFs_2, taskInfo_kl_VfsRamFs_2_env) != rcOk) {
        fprintf(
            stderr, "Can't set env for task \"kl.VfsRamFs\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntitySetArgs(task_kl_VfsRamFs_2, taskInfo_kl_VfsRamFs_2_args) != rcOk) {
        fprintf(
            stderr, "Can't set args for task \"kl.VfsRamFs\"\n"
        );
        return EXIT_FAILURE;
    }
    task_kl_VfsNet_1 = EntityInitEx(
        &taskInfo_kl_VfsNet_1, "kl.VfsNet", "VfsNet"
    );
    if (!task_kl_VfsNet_1) {
        fprintf(
            stderr, "Can't initialize task \"kl.VfsNet\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntitySetEnv(task_kl_VfsNet_1, taskInfo_kl_VfsNet_1_env) != rcOk) {
        fprintf(
            stderr, "Can't set env for task \"kl.VfsNet\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntitySetArgs(task_kl_VfsNet_1, taskInfo_kl_VfsNet_1_args) != rcOk) {
        fprintf(
            stderr, "Can't set args for task \"kl.VfsNet\"\n"
        );
        return EXIT_FAILURE;
    }
    task_kl_rump_Dhcpcd_6 = EntityInitEx(
        &taskInfo_kl_rump_Dhcpcd_6, "kl.rump.Dhcpcd", "dhcpcd_entity"
    );
    if (!task_kl_rump_Dhcpcd_6) {
        fprintf(
            stderr, "Can't initialize task \"kl.rump.Dhcpcd\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntitySetEnv(task_kl_rump_Dhcpcd_6, taskInfo_kl_rump_Dhcpcd_6_env) != rcOk) {
        fprintf(
            stderr, "Can't set env for task \"kl.rump.Dhcpcd\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntitySetArgs(task_kl_rump_Dhcpcd_6, taskInfo_kl_rump_Dhcpcd_6_args) != rcOk) {
        fprintf(
            stderr, "Can't set args for task \"kl.rump.Dhcpcd\"\n"
        );
        return EXIT_FAILURE;
    }
    task_mosquitto_Subscriber_8 = EntityInitEx(
        &taskInfo_mosquitto_Subscriber_8, "mosquitto.Subscriber", "Subscriber"
    );
    if (!task_mosquitto_Subscriber_8) {
        fprintf(
            stderr, "Can't initialize task \"mosquitto.Subscriber\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntitySetEnv(task_mosquitto_Subscriber_8, taskInfo_mosquitto_Subscriber_8_env) != rcOk) {
        fprintf(
            stderr, "Can't set env for task \"mosquitto.Subscriber\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntitySetArgs(task_mosquitto_Subscriber_8, taskInfo_mosquitto_Subscriber_8_args) != rcOk) {
        fprintf(
            stderr, "Can't set args for task \"mosquitto.Subscriber\"\n"
        );
        return EXIT_FAILURE;
    }
    task_kl_Ntpd_0 = EntityInitEx(
        &taskInfo_kl_Ntpd_0, "kl.Ntpd", "ntpd"
    );
    if (!task_kl_Ntpd_0) {
        fprintf(
            stderr, "Can't initialize task \"kl.Ntpd\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntitySetEnv(task_kl_Ntpd_0, taskInfo_kl_Ntpd_0_env) != rcOk) {
        fprintf(
            stderr, "Can't set env for task \"kl.Ntpd\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntitySetArgs(task_kl_Ntpd_0, taskInfo_kl_Ntpd_0_args) != rcOk) {
        fprintf(
            stderr, "Can't set args for task \"kl.Ntpd\"\n"
        );
        return EXIT_FAILURE;
    }

    /* setup connections between entities */

    if (EntityConnectToService(task_kl_VfsRamFs_2, task_kl_drivers_RAMDisk_5, "kl.drivers.RAMDisk") != rcOk) {
        fprintf(stderr, "Can't setup a connection %s\n", "kl.drivers.RAMDisk");
        return EXIT_FAILURE;
    }
    if (EntityConnectToService(task_kl_VfsNet_1, task_kl_drivers_BSP_3, "kl.drivers.BSP") != rcOk) {
        fprintf(stderr, "Can't setup a connection %s\n", "kl.drivers.BSP");
        return EXIT_FAILURE;
    }
    if (EntityConnectToService(task_kl_VfsNet_1, task_kl_drivers_GPIO_4, "kl.drivers.GPIO") != rcOk) {
        fprintf(stderr, "Can't setup a connection %s\n", "kl.drivers.GPIO");
        return EXIT_FAILURE;
    }
    if (EntityConnectToService(task_kl_rump_Dhcpcd_6, task_kl_VfsNet_1, "kl.VfsNet") != rcOk) {
        fprintf(stderr, "Can't setup a connection %s\n", "kl.VfsNet");
        return EXIT_FAILURE;
    }
    if (EntityConnectToService(task_kl_rump_Dhcpcd_6, task_kl_VfsRamFs_2, "kl.VfsRamFs") != rcOk) {
        fprintf(stderr, "Can't setup a connection %s\n", "kl.VfsRamFs");
        return EXIT_FAILURE;
    }
    if (EntityConnectToService(task_mosquitto_Subscriber_8, task_kl_VfsNet_1, "kl.VfsNet") != rcOk) {
        fprintf(stderr, "Can't setup a connection %s\n", "kl.VfsNet");
        return EXIT_FAILURE;
    }
    if (EntityConnectToService(task_mosquitto_Subscriber_8, task_kl_VfsRamFs_2, "kl.VfsRamFs") != rcOk) {
        fprintf(stderr, "Can't setup a connection %s\n", "kl.VfsRamFs");
        return EXIT_FAILURE;
    }
    if (EntityConnectToService(task_mosquitto_Subscriber_8, task_mosquitto_Showapp_7, "showapp_connection") != rcOk) {
        fprintf(stderr, "Can't setup a connection %s\n", "showapp_connection");
        return EXIT_FAILURE;
    }
    if (EntityConnectToService(task_kl_Ntpd_0, task_kl_VfsNet_1, "kl.VfsNet") != rcOk) {
        fprintf(stderr, "Can't setup a connection %s\n", "kl.VfsNet");
        return EXIT_FAILURE;
    }
    if (EntityConnectToService(task_kl_Ntpd_0, task_kl_VfsRamFs_2, "kl.VfsRamFs") != rcOk) {
        fprintf(stderr, "Can't setup a connection %s\n", "kl.VfsRamFs");
        return EXIT_FAILURE;
    }



    /* run entities */

    if (EntityRun(task_mosquitto_Showapp_7) != rcOk) {
        fprintf(
            stderr, "Can't run task \"mosquitto.Showapp\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntityRun(task_kl_drivers_RAMDisk_5) != rcOk) {
        fprintf(
            stderr, "Can't run task \"kl.drivers.RAMDisk\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntityRun(task_kl_drivers_GPIO_4) != rcOk) {
        fprintf(
            stderr, "Can't run task \"kl.drivers.GPIO\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntityRun(task_kl_drivers_BSP_3) != rcOk) {
        fprintf(
            stderr, "Can't run task \"kl.drivers.BSP\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntityRun(task_kl_VfsRamFs_2) != rcOk) {
        fprintf(
            stderr, "Can't run task \"kl.VfsRamFs\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntityRun(task_kl_VfsNet_1) != rcOk) {
        fprintf(
            stderr, "Can't run task \"kl.VfsNet\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntityRun(task_kl_rump_Dhcpcd_6) != rcOk) {
        fprintf(
            stderr, "Can't run task \"kl.rump.Dhcpcd\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntityRun(task_mosquitto_Subscriber_8) != rcOk) {
        fprintf(
            stderr, "Can't run task \"mosquitto.Subscriber\"\n"
        );
        return EXIT_FAILURE;
    }
    if (EntityRun(task_kl_Ntpd_0) != rcOk) {
        fprintf(
            stderr, "Can't run task \"kl.Ntpd\"\n"
        );
        return EXIT_FAILURE;
    }


    return EXIT_SUCCESS;
}
